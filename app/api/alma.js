module.exports = (api) => {
  api.get('/almaws/v1/users', async (req, res) => {
    console.log();
    if ( !req.auth.token.hasAdminAccess && !req.auth.token.hasHrAccess ){
      console.log("REQ:",req.auth.token.hasAdminAccess);
      res.status(403).json({
        error: true,                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         
        message: 'Not authorized to access this resource.'
      });
      return;
    }
    const { RolesModel } = await import('@ucd-lib/iam-support-lib/index.js');
    RolesModel.init(config.alma);

    let response = await RolesModel.getAll();
    console.log("RESP:",response);

    res.json(response);


  });

  api.get('/conf/code-tables/HFrUserRoles.roleType?', async (req, res) => {
      if ( !req.auth.token.hasAdminAccess && !req.auth.token.hasHrAccess ){
          res.status(403).json({
          error: true,
          message: 'Not authorized to access this resource.'
          });
          return;
      }
      const { RolesModel } = await import('@ucd-lib/iam-support-lib/index.js');
      RolesModel.init(config.alma);

      let response = await RolesModel.getAll();
      console.log("RESP2:",response);

      res.json(response);
  });

}